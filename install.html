<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KhanTool - Instalar</title>
    <link rel="stylesheet" href="media/login_khan.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
    .discord-link {
        display: inline-flex;
        align-items: center;
        gap: 0.7em;
        justify-content: center;
        font-weight: 500;
        background: rgba(88,101,242,0.82);
        color: #fff !important;
        padding: 0.88em 2em 0.88em 1.3em;
        border-radius: 9px;
        font-size: 1.13rem;
        box-shadow: 0 2px 16px rgba(88,101,242,0.11);
        border: none;
        text-decoration: none;
        transition: background .14s, filter .12s;
        cursor: pointer;
        user-select: none;
        outline: none;
    }
    .discord-link img {
        height: 1.7em;
        width: 1.7em;
        min-width: 1.7em;
        max-width: 1.7em;
        display: block;
        flex-shrink: 0;
        border-radius: 3px;
        background: none;
        object-fit: contain;
        margin: 0;
    }
    .discord-link:focus,
    .discord-link:hover {
        background: rgba(88,101,242,0.92);
        color: #fff !important;
        text-decoration: none;
    }
    .platform-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
        width: 100%;
    }
    .platform-icon svg {
        display: block;
        margin: 0 auto;
        width: 2.5rem;
        height: 2.5rem;
    }
    </style>
</head>
<body oncontextmenu="return false" onselectstart="return false">
    <div class="fixed-background"></div>
    <div class="header">
        <a href="khantoolmenu.html" class="banner">KhanTool</a>
    </div>
    <div class="install-container fade-in">
        <div class="platform-selector" id="platformSelector">
            <h1 style="font-family: 'CustomFont'; font-size: 3rem; margin-bottom: 1rem;">Instalar KhanTool</h1>
            <p style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 3rem;">Método mais rápido e recomendado</p>
            <div class="bookmarklet-section">
                <h2 class="bookmarklet-title">Bookmarklet</h2>
                <p class="bookmarklet-description">Salve como favorito e use sempre que precisar. Funciona em todos os dispositivos e navegadores de forma rápida e segura.</p>
                <div class="bookmarklet-code" id="bookmarkletCode">javascript:fetch("https://raw.githubusercontent.com/OnePrism0/KhanToolSite/refs/heads/main/js/KhanTool.js").then(t=>t.text()).then(eval);</div>
                <div class="bookmarklet-buttons">
                    <button class="bookmark-button copy-button" onclick="copyBookmarklet()">Copiar Código</button>
                    <a href='javascript:fetch("https://raw.githubusercontent.com/OnePrism0/KhanTool/refs/heads/main/KhanTool.js").then(t=>t.text()).then(eval);'
                       class="bookmark-button" id="dragBookmarklet" draggable="true">
                        Arrastar para Favoritos
                    </a>
                </div>
                <div class="step-list">
                    <h4 style="margin: 1.5rem 0 0.5rem 0; color: var(--primary); text-align: center;">Como usar:</h4>
                    <ol style="padding-left: 1.5rem; max-width: 600px; margin: 0 auto;">
                        <li><strong>Método 1:</strong> Arraste o botão "Arrastar para Favoritos" para sua barra de favoritos</li>
                        <li><strong>Método 2:</strong> Copie o código, crie um novo favorito e cole como URL</li>
                        <li>Acesse a Khan Academy e clique no favorito criado</li>
                        <li>O KhanTool será carregado automaticamente!</li>
                    </ol>
                </div>
            </div>
            <div class="section-divider"></div>
            <h2 style="font-family: 'CustomFont'; font-size: 2rem; margin-bottom: 2rem;">Tutoriais por Plataforma</h2>
            <div class="platform-options">
                <div class="platform-card">
                    <div class="platform-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                    </div>
                    <h3 class="platform-title">PC/Desktop</h3>
                    <p class="platform-description">Tutorial completo para Windows, Mac e Linux. Aprenda a instalar o KhanTool no seu computador em poucos minutos.</p>
                    <a href="#" class="tutorial-link">
                        <svg class="tutorial-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="5,3 19,12 5,21"></polygon>
                        </svg>
                        Assistir Tutorial
                    </a>
                </div>
                <div class="platform-card">
                    <div class="platform-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
                            <path d="M12 6h.01M12 18h.01"/>
                        </svg>
                    </div>
                    <h3 class="platform-title">Android</h3>
                    <p class="platform-description">Passo a passo detalhado para dispositivos Android. Configure o KhanTool no seu smartphone ou tablet Android facilmente.</p>
                    <a href="#" class="tutorial-link">
                        <svg class="tutorial-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="5,3 19,12 5,21"></polygon>
                        </svg>
                        Assistir Tutorial
                    </a>
                </div>
                <div class="platform-card">
                    <div class="platform-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                    </div>
                    <h3 class="platform-title">iOS</h3>
                    <p class="platform-description">Guia especializado para iPhone e iPad. Descubra como usar o KhanTool no iOS com todas as dicas e truques necessárias.</p>
                    <a href="#" class="tutorial-link">
                        <svg class="tutorial-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="5,3 19,12 5,21"></polygon>
                        </svg>
                        Assistir Tutorial
                    </a>
                </div>
            </div>
            <div class="help-section">
                <h3>Precisa de ajuda?</h3>
                <p>Se tiver dúvidas durante a instalação ou uso do KhanTool, nossa comunidade está pronta para ajudar.</p>
                <a href="https://discord.gg/tdy2jCWja2" class="discord-link">
                    <img src="discord.png" alt="Discord" />
                    Entrar no Discord
                </a>
            </div>
        </div>
    </div>
    <footer class="footer">
        feito por <a href="https://discord.gg/cbeK2exF5U" target="_blank">! foquisi</a>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const isVerified = localStorage.getItem('discord_verified');
            const verificationTime = localStorage.getItem('verification_time');
            
            const isExpired = verificationTime && (Date.now() - parseInt(verificationTime)) > 24 * 60 * 60 * 1000;
            
            if (!isVerified || isExpired) {
                window.location.href = 'auth.html?error=token_expired';
                return;
            }
            
            document.querySelectorAll('.fade-in').forEach(el=>el.style.opacity=1);
            document.addEventListener('selectstart', function(e){
                if(!e.target.closest('.bookmarklet-code')){e.preventDefault();return false;}
            });
            document.addEventListener('dragstart', function(e){
                if(e.target.id === "dragBookmarklet") return;
                e.preventDefault();
                return false;
            });
            document.addEventListener('contextmenu', e=>{e.preventDefault();return false;});
        });
        
        function copyBookmarklet() {
            copyToClipboard('bookmarkletCode');
        }
        
        function copyToClipboard(elementId) {
            const codeElement = document.getElementById(elementId);
            const text = codeElement.textContent;
            navigator.clipboard.writeText(text).then(function() {
                showToast('Código copiado para a área de transferência!');
            }).catch(function() {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('Código copiado!');
            });
        }
        
        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = "position: fixed;top: 20px;right: 20px;background: var(--primary);color: white;padding: 1rem 1.5rem;border-radius: 8px;z-index: 9999;box-shadow: 0 4px 12px rgba(0,0,0,0.15);font-weight: 500;opacity: 0;transform: translateX(100px);transition: all 0.3s ease;";
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(()=>{toast.style.opacity='1';toast.style.transform='translateX(0)';},10);
            setTimeout(()=>{toast.style.opacity='0';toast.style.transform='translateX(100px)';setTimeout(()=>document.body.removeChild(toast),300);},3000);
        }
    </script>
</body>
</html>
